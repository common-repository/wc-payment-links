(()=>{let e;var t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let r=new Uint8Array(16),o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));var l=function(l,a,c){if(t.randomUUID&&!a&&!l)return t.randomUUID();let d=(l=l||{}).random||(l.rng||function(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(r)})();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,a){c=c||0;for(let e=0;e<16;++e)a[c+e]=d[e];return a}return function(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}(d)};class a{constructor(){this.orderTable(),this.paginationTable()}orderTable(){let e=document.querySelectorAll(".order-table"),t=new URLSearchParams(window.location.search).get("order")||"DESC";e.forEach(e=>{let r=e.getAttribute("data-order");r&&e.addEventListener("click",()=>{t="ASC"===t?"DESC":"ASC",this.queryURL([{key:"orderby",value:r},{key:"order",value:t}])})})}paginationTable(){document.querySelectorAll(".pagination").forEach(e=>{let t=e.getAttribute("data-page");t&&e.addEventListener("click",()=>{this.queryURL([{key:"table-page",value:t}])})})}queryURL(e){let t=new URLSearchParams(window.location.search);e.forEach(({key:e,value:r})=>{t.delete(e),t.append(e,r)}),window.location.replace(`${location.origin+location.pathname}?${t.toString()}`)}}class c{constructor(){this.addPaymentLink(),this.editPaymentLink(),this.copyLink(),this.handlerToken(),this.handleModalProducts(),new a}handlerToken(){let e=document.querySelector("#generate-token");e&&e.addEventListener("click",()=>{this.generateToken()})}generateToken(){let e=document.querySelector("#token");e&&(e.value=l())}copyLink(){document.querySelectorAll(".copy-element").forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-copy");navigator?.clipboard?.writeText&&navigator.clipboard.writeText(t)})})}addPaymentLink(){document.querySelector("#add-payment-link").addEventListener("click",()=>{this.openModal(),this.generateToken()})}editPaymentLink(){let e=document.querySelectorAll(".open-link-form"),t=document.querySelector("#close-link-form");e.forEach(e=>{e.addEventListener("click",()=>{this.openModal(),this.fillModalFields(e.getAttribute("data-link"))})}),t.addEventListener("click",()=>{this.closeModal()})}openModal(){let e=document.querySelector("#link-form");this.clearModal(e),this.clearModalProducts(),e.classList.remove("hidden")}closeModal(){let e=document.querySelector("#link-form");this.clearModal(e),this.clearModalProducts(),e.classList.add("hidden")}clearModal(e){e&&(["name","token","expire_at","expire_hour","coupon","link_id","hidden_link_id","link_url"].forEach(t=>{let r=e.querySelector(`#${t}`);switch(t){case"link_id":r.innerText="";break;case"link_url":r.removeAttribute("href"),r.classList.add("hidden");break;default:r&&(r.value="")}}),["product-checkbox","product-number"].forEach(t=>{e.querySelectorAll(`.${t}`).forEach(e=>{e.value="","product-checkbox"===t&&(e.checked=!1)})}))}fillModalFields(e){let t=JSON.parse(e);if(t)for(let e in t){let r=document.querySelector(`#${e}`);switch(e){case"products":this.fillModalProducts(t[e]);break;case"link_id":r.innerText=`#${t[e]}`,document.querySelector(`#hidden_${e}`).value=t[e];break;case"link_url":r.setAttribute("href",t[e]),r.classList.remove("hidden");break;default:r&&(r.value=t[e])}}}fillModalProducts(e){let t=document.querySelector("#product-list");t&&(t.value=JSON.stringify(e)),e.forEach(e=>{document.querySelectorAll(".modal-product").forEach(t=>{let r=t.querySelector(".product-checkbox"),o=t.querySelector(".product-number");parseInt(r.getAttribute("data-id"))===e.product&&(r.checked=!0,o.value=e.quantity)})})}clearModalProducts(){let e=document.querySelector("#product-list");e&&(e.value="")}handleModalProducts(){[document.querySelectorAll(".product-checkbox"),document.querySelectorAll(".product-number")].forEach(e=>{e.forEach(e=>{e.addEventListener("change",()=>{this.updateModalProducts()})})})}updateModalProducts(){let e=document.querySelectorAll(".modal-product"),t=[];e.forEach(e=>{let r=e.querySelector(".product-checkbox"),o=e.querySelector(".product-number");r?.checked?(o.value||(o.value=1),t.push({product:r.getAttribute("data-id"),quantity:o.value?o.value:0})):o.value="",r.addEventListener("change",()=>{r.checked||(o.value="")})});let r=document.querySelector("#product-list");r&&(r.value=JSON.stringify(t))}}document.addEventListener("DOMContentLoaded",()=>{new c})})();
//# sourceMappingURL=index.js.map
